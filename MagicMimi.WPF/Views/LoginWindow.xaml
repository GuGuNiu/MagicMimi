<Window x:Class="MagicMimi.WPF.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:MagicMimi.WPF.Converters"
        Title="扫码登录" Height="450" Width="350"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterOwner" Unloaded="Window_Unloaded"
        MouseDown="Window_MouseDown">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Border CornerRadius="16" BorderThickness="2" BorderBrush="{StaticResource MagicBorderLightBrush}" Background="{StaticResource MagicPanelBgBrush}">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="4" Direction="270" Color="{Binding Source={StaticResource MagicShadowBrush}, Path=Color}" Opacity="0.8" BlurRadius="4" />
            </Border.Effect>
            <StackPanel Margin="25">
                <TextBlock Text="扫码登录 获取Stoken" FontSize="16" FontWeight="SemiBold" HorizontalAlignment="Center" Foreground="{StaticResource MagicTextDarkBrush}" Margin="0,0,0,15"/>
                <Image Source="{Binding QrCodeImage}" Width="200" Height="200" Margin="0,10"/>
                <TextBlock Text="{Binding QrStatusText}" TextWrapping="Wrap" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource MagicTextMediumBrush}" Margin="0,10"/>
                <StackPanel Margin="0,15,0,0" Orientation="Vertical" Visibility="{Binding IsLoginConfirmed, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <TextBlock Text="账户名:" Margin="0,0,0,5" Foreground="{StaticResource MagicTextDarkBrush}"/>
                    <TextBox Text="{Binding AccountName, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource MimiTextBoxStyle}"/>
                    <Button Content="保存账户" Command="{Binding SaveAccountCommand}" Style="{StaticResource MimiButtonActionStyle}" Margin="0,15,0,0" HorizontalAlignment="Stretch"/>
                </StackPanel>
            </StackPanel>
        </Border>
        <Button Content="✕" Style="{StaticResource WindowControlButton}" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,10,10,0" Click="CloseButton_Click"/>
    </Grid>
</Window>